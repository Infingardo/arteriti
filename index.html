<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scoring Diagnostico - Arterite a Cellule Giganti (GCA)</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Lucide Icons as React components
        const AlertCircle = ({ className, size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="12"></line>
                <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
        );

        const CheckCircle = ({ className, size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
        );

        const XCircle = ({ className, size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line>
                <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
        );

        const Info = ({ className, size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
        );

        const RotateCcw = ({ className, size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="1 4 1 10 7 10"></polyline>
                <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
            </svg>
        );

        function GCAScorer() {
            const [sampleAdequacy, setSampleAdequacy] = useState({
                length: '',
                arterialStructure: false,
                sections: '',
                elasticStain: false
            });

            const [majorFindings, setMajorFindings] = useState({
                giantCells: false,
                granulomatous: false,
                elasticFragmentation: false,
                transmuralInflammation: false
            });

            const [minorFindings, setMinorFindings] = useState({
                lymphocyticInfiltrate: false,
                intimalThickening: false,
                adventitialInflammation: false,
                neovascularization: false,
                focalElasticFragmentation: false
            });

            const [clinicalData, setClinicalData] = useState({
                age: '',
                newHeadache: false,
                jawClaudication: false,
                visualSymptoms: false,
                esr: '',
                crp: false,
                haloSign: false,
                onSteroids: false,
                steroidDays: ''
            });

            const [ihcMarkers, setIhcMarkers] = useState({
                cd68: false,
                cd4: false,
                cd8: false,
                cd3: false,
                cd20: false
            });

            const calculateScore = () => {
                let histoScore = 0;
                let clinicalScore = 0;
                let adequacy = true;

                const length = parseFloat(sampleAdequacy.length);
                const sections = parseInt(sampleAdequacy.sections);
                
                if (!sampleAdequacy.arterialStructure || length < 10 || sections < 10 || !sampleAdequacy.elasticStain) {
                    adequacy = false;
                }

                if (majorFindings.giantCells) histoScore += 25;
                if (majorFindings.granulomatous) histoScore += 25;
                if (majorFindings.elasticFragmentation) histoScore += 25;
                if (majorFindings.transmuralInflammation) histoScore += 25;

                let minorCount = 0;
                if (minorFindings.lymphocyticInfiltrate) { histoScore += 5; minorCount++; }
                if (minorFindings.intimalThickening) { histoScore += 5; minorCount++; }
                if (minorFindings.adventitialInflammation) { histoScore += 5; minorCount++; }
                if (minorFindings.neovascularization) { histoScore += 5; minorCount++; }
                if (minorFindings.focalElasticFragmentation) { histoScore += 5; minorCount++; }

                const age = parseInt(clinicalData.age);
                if (age >= 50) clinicalScore += 15;
                if (age >= 70) clinicalScore += 10;
                
                if (clinicalData.newHeadache) clinicalScore += 20;
                if (clinicalData.jawClaudication) clinicalScore += 25;
                if (clinicalData.visualSymptoms) clinicalScore += 20;
                
                const esr = parseInt(clinicalData.esr);
                if (esr >= 50) clinicalScore += 10;
                if (esr >= 80) clinicalScore += 10;
                
                if (clinicalData.crp) clinicalScore += 10;
                if (clinicalData.haloSign) clinicalScore += 15;

                let steroidPenalty = 0;
                if (clinicalData.onSteroids) {
                    const days = parseInt(clinicalData.steroidDays) || 0;
                    if (days >= 7) steroidPenalty = 30;
                    else if (days >= 3) steroidPenalty = 20;
                    else steroidPenalty = 10;
                }

                const compositeScore = Math.round((histoScore * 0.6) + (clinicalScore * 0.4) - steroidPenalty);
                
                return {
                    histoScore,
                    clinicalScore,
                    compositeScore: Math.max(0, compositeScore),
                    adequacy,
                    steroidPenalty,
                    majorCount: Object.values(majorFindings).filter(Boolean).length,
                    minorCount
                };
            };

            const getDiagnosis = (scores) => {
                if (!scores.adequacy) {
                    return {
                        category: 'NON VALUTABILE',
                        color: 'bg-gray-100 border-gray-400',
                        icon: <XCircle className="text-gray-600" />,
                        text: 'Campione inadeguato per diagnosi definitiva',
                        recommendation: 'Si raccomanda nuovo prelievo con segmento ‚â•10 mm (ottimale 15-20 mm), ‚â•15 sezioni seriali, colorazione elastica'
                    };
                }

                const { compositeScore, majorCount, minorCount, steroidPenalty } = scores;

                if (compositeScore >= 70 && majorCount >= 2) {
                    return {
                        category: 'DIAGNOSTICO',
                        color: 'bg-red-100 border-red-500',
                        icon: <AlertCircle className="text-red-600" />,
                        text: 'Arterite a cellule giganti (GCA) - DIAGNOSTICO',
                        probability: '>95%',
                        recommendation: 'Diagnosi confermata. Procedere con trattamento secondo linee guida.'
                    };
                }

                if (compositeScore >= 55 && (majorCount >= 1 || (minorCount >= 3 && scores.clinicalScore >= 50))) {
                    return {
                        category: 'ALTAMENTE SUGGESTIVO',
                        color: 'bg-orange-100 border-orange-500',
                        icon: <AlertCircle className="text-orange-600" />,
                        text: 'Altamente suggestivo per GCA',
                        probability: '75-95%',
                        recommendation: steroidPenalty > 0 
                            ? 'Reperti compatibili. Nota: biopsia eseguita sotto steroidi (sensibilit√† ridotta). Considerare imaging aggiuntivo.'
                            : 'Reperti altamente suggestivi. Correlazione clinico-laboratoristica. Considerare inizio terapia.'
                    };
                }

                if (compositeScore >= 40 && scores.clinicalScore >= 40) {
                    return {
                        category: 'COMPATIBILE',
                        color: 'bg-yellow-100 border-yellow-500',
                        icon: <Info className="text-yellow-600" />,
                        text: 'Compatibile con GCA (possibile variante senza cellule giganti)',
                        probability: '50-75%',
                        recommendation: 'Reperti non diagnostici ma compatibili nel contesto clinico. Raccomandati: imaging avanzato (eco Doppler, PET-TC), eventuale biopsia controlaterale se negativit√† imaging.'
                    };
                }

                if (compositeScore >= 25) {
                    return {
                        category: 'SOSPETTO BASSO',
                        color: 'bg-blue-100 border-blue-400',
                        icon: <Info className="text-blue-600" />,
                        text: 'Bassa probabilit√† di GCA',
                        probability: '25-50%',
                        recommendation: 'Alterazioni aspecifiche. DD: altre vasculiti, aterosclerosi. Valutare diagnosi alternative.'
                    };
                }

                return {
                    category: 'NEGATIVO',
                    color: 'bg-green-100 border-green-500',
                    icon: <CheckCircle className="text-green-600" />,
                    text: 'Negativo per GCA',
                    probability: '<25%',
                    recommendation: steroidPenalty > 0
                        ? 'Negativo, ma biopsia sotto steroidi. Se forte sospetto clinico: imaging, biopsia controlaterale, o proseguire terapia empirica.'
                        : 'Negativo per GCA. Skip lesions possibili se persistente sospetto clinico elevato.'
                };
            };

            const getIhcRecommendations = () => {
                const recommendations = [];
                const { majorCount, minorCount, compositeScore } = calculateScore();
                
                if (!ihcMarkers.cd68) {
                    if (majorCount === 0 || (majorCount === 1 && minorCount < 3)) {
                        recommendations.push({
                            marker: 'CD68',
                            priority: 'ALTA',
                            reason: 'Utile per identificare infiltrato macrofagico e granulomi anche quando cellule giganti sono scarse. Sensibilit√† 69%.',
                            color: 'text-red-600'
                        });
                    } else if (majorCount >= 2) {
                        recommendations.push({
                            marker: 'CD68',
                            priority: 'OPZIONALE',
                            reason: 'Reperti maggiori gi√† presenti, ma CD68 pu√≤ confermare natura macrofagica dell\'infiltrato.',
                            color: 'text-blue-600'
                        });
                    }
                }

                if (!ihcMarkers.cd4 && majorCount < 2) {
                    recommendations.push({
                        marker: 'CD4',
                        priority: 'MEDIA',
                        reason: 'Per confermare predominanza T helper nell\'infiltrato linfocitario.',
                        color: 'text-orange-600'
                    });
                }

                if (ihcMarkers.cd4 && !ihcMarkers.cd8) {
                    recommendations.push({
                        marker: 'CD8',
                        priority: 'MEDIA',
                        reason: 'Per calcolare rapporto CD4/CD8 (in GCA tipicamente >2:1). Utile per caratterizzazione completa.',
                        color: 'text-orange-600'
                    });
                }

                if (!ihcMarkers.cd4 && !ihcMarkers.cd8 && (compositeScore >= 40 && compositeScore < 70)) {
                    recommendations.push({
                        marker: 'CD4 + CD8',
                        priority: 'ALTA',
                        reason: 'Caso borderline: rapporto CD4/CD8 pu√≤ aiutare nella diagnosi differenziale.',
                        color: 'text-red-600'
                    });
                }

                if (!ihcMarkers.cd4 && !ihcMarkers.cd8 && clinicalData.onSteroids) {
                    recommendations.push({
                        marker: 'CD4 + CD8',
                        priority: 'ALTA',
                        reason: 'Biopsia sotto steroidi: caratterizzazione immunologica completa pu√≤ compensare sensibilit√† ridotta.',
                        color: 'text-red-600'
                    });
                }

                if (!ihcMarkers.cd20 && majorCount === 0 && minorCount < 2) {
                    recommendations.push({
                        marker: 'CD20',
                        priority: 'MEDIA',
                        reason: 'Reperti scarsi: escludere altre vasculiti (IgG4-correlata, ANCA-associate) dove linfociti B sono abbondanti.',
                        color: 'text-orange-600'
                    });
                }

                if (!ihcMarkers.cd3 && (ihcMarkers.cd4 || ihcMarkers.cd8) && majorCount < 2) {
                    recommendations.push({
                        marker: 'CD3',
                        priority: 'BASSA',
                        reason: 'Opzionale: per quantificare popolazione T totale. Utile in casistiche/studi ma non essenziale per diagnosi.',
                        color: 'text-gray-600'
                    });
                }

                return recommendations;
            };

            const scores = calculateScore();
            const diagnosis = getDiagnosis(scores);
            const ihcRecommendations = getIhcRecommendations();

            const resetAll = () => {
                setSampleAdequacy({
                    length: '',
                    arterialStructure: false,
                    sections: '',
                    elasticStain: false
                });
                setMajorFindings({
                    giantCells: false,
                    granulomatous: false,
                    elasticFragmentation: false,
                    transmuralInflammation: false
                });
                setMinorFindings({
                    lymphocyticInfiltrate: false,
                    intimalThickening: false,
                    adventitialInflammation: false,
                    neovascularization: false,
                    focalElasticFragmentation: false
                });
                setClinicalData({
                    age: '',
                    newHeadache: false,
                    jawClaudication: false,
                    visualSymptoms: false,
                    esr: '',
                    crp: false,
                    haloSign: false,
                    onSteroids: false,
                    steroidDays: ''
                });
                setIhcMarkers({
                    cd68: false,
                    cd4: false,
                    cd8: false,
                    cd3: false,
                    cd20: false
                });
            };

            return (
                <div className="max-w-6xl mx-auto p-6 bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen">
                    <div className="bg-white rounded-lg shadow-xl p-6 mb-6">
                        <div className="flex justify-between items-center">
                            <div>
                                <h1 className="text-3xl font-bold text-indigo-900 mb-2">
                                    Scoring Diagnostico - Arterite a Cellule Giganti (GCA)
                                </h1>
                                <p className="text-gray-600 text-sm">
                                    Algoritmo diagnostico integrato: dati istologici + contesto clinico
                                </p>
                            </div>
                            <button
                                onClick={resetAll}
                                className="flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors duration-200 border border-gray-300"
                                title="Azzera tutti i campi"
                            >
                                <RotateCcw size={20} />
                                <span className="font-medium">Reset</span>
                            </button>
                        </div>
                    </div>

                    <div className="grid md:grid-cols-2 gap-6">
                        <div className="space-y-6">
                            <div className="bg-white rounded-lg shadow-md p-5">
                                <h2 className="text-xl font-bold text-gray-800 mb-4 border-b pb-2">
                                    1. Adeguatezza Campione
                                </h2>
                                <div className="space-y-3">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            Lunghezza frammento (mm)
                                        </label>
                                        <input
                                            type="number"
                                            step="0.5"
                                            value={sampleAdequacy.length}
                                            onChange={(e) => setSampleAdequacy({...sampleAdequacy, length: e.target.value})}
                                            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500"
                                            placeholder="es. 15"
                                        />
                                        <p className="text-xs text-gray-500 mt-1">Minimo 10 mm, ottimale ‚â•15 mm</p>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            Numero sezioni analizzate
                                        </label>
                                        <input
                                            type="number"
                                            value={sampleAdequacy.sections}
                                            onChange={(e) => setSampleAdequacy({...sampleAdequacy, sections: e.target.value})}
                                            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500"
                                            placeholder="es. 15"
                                        />
                                    </div>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={sampleAdequacy.arterialStructure}
                                            onChange={(e) => setSampleAdequacy({...sampleAdequacy, arterialStructure: e.target.checked})}
                                            className="w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"
                                        />
                                        <span className="text-sm text-gray-700">Struttura arteriosa presente</span>
                                    </label>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={sampleAdequacy.elasticStain}
                                            onChange={(e) => setSampleAdequacy({...sampleAdequacy, elasticStain: e.target.checked})}
                                            className="w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"
                                        />
                                        <span className="text-sm text-gray-700">Colorazione elastica eseguita</span>
                                    </label>
                                </div>
                            </div>

                            <div className="bg-white rounded-lg shadow-md p-5">
                                <h2 className="text-xl font-bold text-gray-800 mb-4 border-b pb-2">
                                    2. Reperti Istologici Maggiori
                                    <span className="text-sm font-normal text-gray-500 ml-2">(25 punti ciascuno)</span>
                                </h2>
                                <div className="space-y-2">
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={majorFindings.giantCells}
                                            onChange={(e) => setMajorFindings({...majorFindings, giantCells: e.target.checked})}
                                            className="w-4 h-4 text-red-600 rounded focus:ring-red-500"
                                        />
                                        <span className="text-sm text-gray-700">Cellule giganti multinucleate (giunzione intima-media)</span>
                                    </label>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={majorFindings.granulomatous}
                                            onChange={(e) => setMajorFindings({...majorFindings, granulomatous: e.target.checked})}
                                            className="w-4 h-4 text-red-600 rounded focus:ring-red-500"
                                        />
                                        <span className="text-sm text-gray-700">Infiammazione granulomatosa organizzata</span>
                                    </label>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={majorFindings.elasticFragmentation}
                                            onChange={(e) => setMajorFindings({...majorFindings, elasticFragmentation: e.target.checked})}
                                            className="w-4 h-4 text-red-600 rounded focus:ring-red-500"
                                        />
                                        <span className="text-sm text-gray-700">Frammentazione elastica diffusa (pi√π del 30% circonferenza)</span>
                                    </label>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={majorFindings.transmuralInflammation}
                                            onChange={(e) => setMajorFindings({...majorFindings, transmuralInflammation: e.target.checked})}
                                            className="w-4 h-4 text-red-600 rounded focus:ring-red-500"
                                        />
                                        <span className="text-sm text-gray-700">Infiammazione transmurale</span>
                                    </label>
                                </div>
                            </div>

                            <div className="bg-white rounded-lg shadow-md p-5">
                                <h2 className="text-xl font-bold text-gray-800 mb-4 border-b pb-2">
                                    3. Reperti Istologici Minori
                                    <span className="text-sm font-normal text-gray-500 ml-2">(5 punti ciascuno)</span>
                                </h2>
                                <div className="space-y-2">
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={minorFindings.lymphocyticInfiltrate}
                                            onChange={(e) => setMinorFindings({...minorFindings, lymphocyticInfiltrate: e.target.checked})}
                                            className="w-4 h-4 text-orange-600 rounded focus:ring-orange-500"
                                        />
                                        <span className="text-sm text-gray-700">Infiltrato linfocitario CD4+ predominante</span>
                                    </label>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={minorFindings.intimalThickening}
                                            onChange={(e) => setMinorFindings({...minorFindings, intimalThickening: e.target.checked})}
                                            className="w-4 h-4 text-orange-600 rounded focus:ring-orange-500"
                                        />
                                        <span className="text-sm text-gray-700">Ispessimento intimale concentrico significativo</span>
                                    </label>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={minorFindings.adventitialInflammation}
                                            onChange={(e) => setMinorFindings({...minorFindings, adventitialInflammation: e.target.checked})}
                                            className="w-4 h-4 text-orange-600 rounded focus:ring-orange-500"
                                        />
                                        <span className="text-sm text-gray-700">Infiammazione avventiziale/periavventiziale</span>
                                    </label>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={minorFindings.neovascularization}
                                            onChange={(e) => setMinorFindings({...minorFindings, neovascularization: e.target.checked})}
                                            className="w-4 h-4 text-orange-600 rounded focus:ring-orange-500"
                                        />
                                        <span className="text-sm text-gray-700">Neovascolarizzazione della parete</span>
                                    </label>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={minorFindings.focalElasticFragmentation}
                                            onChange={(e) => setMinorFindings({...minorFindings, focalElasticFragmentation: e.target.checked})}
                                            className="w-4 h-4 text-orange-600 rounded focus:ring-orange-500"
                                        />
                                        <span className="text-sm text-gray-700">Frammentazione elastica focale (meno del 30%) con infiammazione</span>
                                    </label>
                                </div>
                            </div>

                            <div className="bg-white rounded-lg shadow-md p-5">
                                <h2 className="text-xl font-bold text-gray-800 mb-4 border-b pb-2">
                                    4. Dati Clinici
                                </h2>
                                <div className="space-y-3">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            Et√† paziente (anni)
                                        </label>
                                        <input
                                            type="number"
                                            value={clinicalData.age}
                                            onChange={(e) => setClinicalData({...clinicalData, age: e.target.value})}
                                            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500"
                                            placeholder="es. 72"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            VES (mm/h)
                                        </label>
                                        <input
                                            type="number"
                                            value={clinicalData.esr}
                                            onChange={(e) => setClinicalData({...clinicalData, esr: e.target.value})}
                                            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500"
                                            placeholder="es. 95"
                                        />
                                    </div>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={clinicalData.newHeadache}
                                            onChange={(e) => setClinicalData({...clinicalData, newHeadache: e.target.checked})}
                                            className="w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"
                                        />
                                        <span className="text-sm text-gray-700">Cefalea di nuova insorgenza</span>
                                    </label>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={clinicalData.jawClaudication}
                                            onChange={(e) => setClinicalData({...clinicalData, jawClaudication: e.target.checked})}
                                            className="w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"
                                        />
                                        <span className="text-sm text-gray-700">Claudicatio mascellare</span>
                                    </label>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={clinicalData.visualSymptoms}
                                            onChange={(e) => setClinicalData({...clinicalData, visualSymptoms: e.target.checked})}
                                            className="w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"
                                        />
                                        <span className="text-sm text-gray-700">Disturbi visivi</span>
                                    </label>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={clinicalData.crp}
                                            onChange={(e) => setClinicalData({...clinicalData, crp: e.target.checked})}
                                            className="w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"
                                        />
                                        <span className="text-sm text-gray-700">PCR elevata</span>
                                    </label>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={clinicalData.haloSign}
                                            onChange={(e) => setClinicalData({...clinicalData, haloSign: e.target.checked})}
                                            className="w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"
                                        />
                                        <span className="text-sm text-gray-700">Halo sign ecografico positivo</span>
                                    </label>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={clinicalData.onSteroids}
                                            onChange={(e) => setClinicalData({...clinicalData, onSteroids: e.target.checked})}
                                            className="w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"
                                        />
                                        <span className="text-sm text-gray-700">Terapia steroidea gi√† iniziata</span>
                                    </label>
                                    {clinicalData.onSteroids && (
                                        <div className="ml-6">
                                            <label className="block text-sm font-medium text-gray-700 mb-1">
                                                Giorni di terapia steroidea
                                            </label>
                                            <input
                                                type="number"
                                                value={clinicalData.steroidDays}
                                                onChange={(e) => setClinicalData({...clinicalData, steroidDays: e.target.value})}
                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500"
                                                placeholder="es. 5"
                                            />
                                        </div>
                                    )}
                                </div>
                            </div>

                            <div className="bg-white rounded-lg shadow-md p-5">
                                <h2 className="text-xl font-bold text-gray-800 mb-4 border-b pb-2">
                                    5. Marker Immunoistochimici Eseguiti
                                </h2>
                                <div className="space-y-2">
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={ihcMarkers.cd68}
                                            onChange={(e) => setIhcMarkers({...ihcMarkers, cd68: e.target.checked})}
                                            className="w-4 h-4 text-purple-600 rounded focus:ring-purple-500"
                                        />
                                        <span className="text-sm text-gray-700">
                                            <strong>CD68</strong> (macrofagi)
                                        </span>
                                    </label>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={ihcMarkers.cd4}
                                            onChange={(e) => setIhcMarkers({...ihcMarkers, cd4: e.target.checked})}
                                            className="w-4 h-4 text-purple-600 rounded focus:ring-purple-500"
                                        />
                                        <span className="text-sm text-gray-700">
                                            <strong>CD4</strong> (T helper)
                                        </span>
                                    </label>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={ihcMarkers.cd8}
                                            onChange={(e) => setIhcMarkers({...ihcMarkers, cd8: e.target.checked})}
                                            className="w-4 h-4 text-purple-600 rounded focus:ring-purple-500"
                                        />
                                        <span className="text-sm text-gray-700">
                                            <strong>CD8</strong> (T citotossici)
                                        </span>
                                    </label>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={ihcMarkers.cd3}
                                            onChange={(e) => setIhcMarkers({...ihcMarkers, cd3: e.target.checked})}
                                            className="w-4 h-4 text-purple-600 rounded focus:ring-purple-500"
                                        />
                                        <span className="text-sm text-gray-700">
                                            <strong>CD3</strong> (pan-T)
                                        </span>
                                    </label>
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={ihcMarkers.cd20}
                                            onChange={(e) => setIhcMarkers({...ihcMarkers, cd20: e.target.checked})}
                                            className="w-4 h-4 text-purple-600 rounded focus:ring-purple-500"
                                        />
                                        <span className="text-sm text-gray-700">
                                            <strong>CD20</strong> (linfociti B)
                                        </span>
                                    </label>
                                </div>
                                <div className="mt-4 p-3 bg-purple-50 rounded-md">
                                    <p className="text-xs text-purple-800">
                                        <strong>üí° Nota:</strong> Spunta i marker gi√† eseguiti. L'algoritmo suggerir√† eventuali marker aggiuntivi utili per la diagnosi.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div className="space-y-6">
                            <div className="bg-white rounded-lg shadow-md p-5">
                                <h2 className="text-xl font-bold text-gray-800 mb-4 border-b pb-2">
                                    Punteggi
                                </h2>
                                <div className="space-y-3">
                                    <div className="flex justify-between items-center">
                                        <span className="text-gray-700">Score Istologico:</span>
                                        <span className="text-2xl font-bold text-red-600">{scores.histoScore}/100</span>
                                    </div>
                                    <div className="w-full bg-gray-200 rounded-full h-3">
                                        <div 
                                            className="bg-red-500 h-3 rounded-full transition-all duration-500"
                                            style={{width: `${scores.histoScore}%`}}
                                        />
                                    </div>
                                    
                                    <div className="flex justify-between items-center mt-4">
                                        <span className="text-gray-700">Score Clinico:</span>
                                        <span className="text-2xl font-bold text-blue-600">{scores.clinicalScore}/100</span>
                                    </div>
                                    <div className="w-full bg-gray-200 rounded-full h-3">
                                        <div 
                                            className="bg-blue-500 h-3 rounded-full transition-all duration-500"
                                            style={{width: `${scores.clinicalScore}%`}}
                                        />
                                    </div>

                                    {scores.steroidPenalty > 0 && (
                                        <div className="bg-yellow-50 border border-yellow-300 rounded-md p-3 mt-4">
                                            <p className="text-sm text-yellow-800">
                                                ‚ö†Ô∏è Penalit√† per terapia steroidea: -{scores.steroidPenalty} punti
                                            </p>
                                        </div>
                                    )}

                                    <div className="flex justify-between items-center mt-4 pt-4 border-t-2 border-gray-300">
                                        <span className="text-gray-900 font-semibold">Score Composito:</span>
                                        <span className="text-3xl font-bold text-indigo-600">{scores.compositeScore}/100</span>
                                    </div>
                                    <div className="w-full bg-gray-200 rounded-full h-4">
                                        <div 
                                            className="bg-gradient-to-r from-indigo-500 to-purple-600 h-4 rounded-full transition-all duration-500"
                                            style={{width: `${scores.compositeScore}%`}}
                                        />
                                    </div>
                                </div>
                            </div>

                            <div className={`rounded-lg shadow-lg p-6 border-2 ${diagnosis.color}`}>
                                <div className="flex items-start space-x-4">
                                    <div className="flex-shrink-0 mt-1">
                                        {diagnosis.icon}
                                    </div>
                                    <div className="flex-1">
                                        <h3 className="text-xl font-bold mb-2">{diagnosis.category}</h3>
                                        <p className="text-lg font-semibold mb-2">{diagnosis.text}</p>
                                        {diagnosis.probability && (
                                            <p className="text-sm font-medium mb-3">
                                                Probabilit√† stimata: <span className="font-bold">{diagnosis.probability}</span>
                                            </p>
                                        )}
                                        <div className="bg-white bg-opacity-50 rounded-md p-3 mt-3">
                                            <p className="text-sm font-medium">Raccomandazione:</p>
                                            <p className="text-sm mt-1">{diagnosis.recommendation}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-white rounded-lg shadow-md p-5">
                                <h2 className="text-xl font-bold text-gray-800 mb-4 border-b pb-2">
                                    Riepilogo Reperti
                                </h2>
                                <div className="space-y-2 text-sm">
                                    <div className="flex justify-between">
                                        <span className="text-gray-700">Reperti maggiori presenti:</span>
                                        <span className="font-bold text-red-600">{scores.majorCount}/4</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-gray-700">Reperti minori presenti:</span>
                                        <span className="font-bold text-orange-600">{scores.minorCount}/5</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-gray-700">Campione adeguato:</span>
                                        <span className={`font-bold ${scores.adequacy ? 'text-green-600' : 'text-red-600'}`}>
                                            {scores.adequacy ? 'S√å' : 'NO'}
                                        </span>
                                    </div>
                                </div>
                            </div>

                            {ihcRecommendations.length > 0 && (
                                <div className="bg-white rounded-lg shadow-md p-5">
                                    <h2 className="text-xl font-bold text-gray-800 mb-4 border-b pb-2">
                                        üî¨ Raccomandazioni Immunoistochimica
                                    </h2>
                                    <div className="space-y-3">
                                        {ihcRecommendations.map((rec, index) => (
                                            <div key={index} className="border-l-4 border-purple-400 pl-3 py-2 bg-purple-50 rounded-r">
                                                <div className="flex items-center justify-between mb-1">
                                                    <span className="font-bold text-gray-800">{rec.marker}</span>
                                                    <span className={`text-xs font-semibold px-2 py-1 rounded ${rec.color} ${
                                                        rec.priority === 'ALTA' ? 'bg-red-100' : 
                                                        rec.priority === 'MEDIA' ? 'bg-orange-100' : 
                                                        'bg-gray-100'
                                                    }`}>
                                                        {rec.priority}
                                                    </span>
                                                </div>
                                                <p className="text-sm text-gray-700">{rec.reason}</p>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            <div className="bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg p-5">
                                <h3 className="font-bold text-purple-900 mb-3">üìã Pannelli IHC Standard</h3>
                                
                                <div className="space-y-3 text-sm">
                                    <div className="bg-white rounded-md p-3 border-l-4 border-green-500">
                                        <p className="font-bold text-green-800 mb-1">PANNELLO BASE (sufficiente in maggioranza casi)</p>
                                        <ul className="text-gray-700 ml-4 space-y-1">
                                            <li>‚Ä¢ H&E + colorazione elastica (obbligatorio)</li>
                                            <li>‚Ä¢ Campione ‚â•10 mm, ottimale 15-20 mm</li>
                                            <li>‚Ä¢ <strong>CD68</strong> (macrofagi) - quasi indispensabile</li>
                                            <li>‚Ä¢ CD4 opzionale se reperti maggiori presenti</li>
                                        </ul>
                                    </div>

                                    <div className="bg-white rounded-md p-3 border-l-4 border-orange-500">
                                        <p className="font-bold text-orange-800 mb-1">PANNELLO COMPLETO (casi difficili/borderline)</p>
                                        <ul className="text-gray-700 ml-4 space-y-1">
                                            <li>‚Ä¢ <strong>CD68</strong> + <strong>CD4</strong> + <strong>CD8</strong> (rapporto CD4/CD8)</li>
                                            <li>‚Ä¢ <strong>CD20</strong> (escludere altre vasculiti)</li>
                                            <li>‚Ä¢ CD3 opzionale (pan-T per quantificazione)</li>
                                        </ul>
                                    </div>

                                    <div className="bg-white rounded-md p-3 border-l-4 border-blue-500">
                                        <p className="font-bold text-blue-800 mb-1">Performance diagnostica (letteratura)</p>
                                        <ul className="text-gray-700 ml-4 space-y-1">
                                            <li>‚Ä¢ CD68: sensibilit√† 69%, specificit√† 86%</li>
                                            <li>‚Ä¢ Positivo nel 94% dei casi confermati</li>
                                            <li>‚Ä¢ CD4/CD8 in GCA: rapporto tipico maggiore di 2:1</li>
                                            <li>‚Ä¢ CD20: scarso/assente in GCA (se abbondante ‚Üí ripensare diagnosi)</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-indigo-50 rounded-lg p-5 text-sm">
                                <h3 className="font-bold text-indigo-900 mb-2">üìö Note metodologiche</h3>
                                <ul className="space-y-1 text-indigo-800">
                                    <li>‚Ä¢ Score composito: 60% istologia + 40% clinica</li>
                                    <li>‚Ä¢ Reperti maggiori: specificit√† maggiore di 90% (25 pt ciascuno)</li>
                                    <li>‚Ä¢ Reperti minori: sensibilit√† aumentata (5 pt ciascuno)</li>
                                    <li>‚Ä¢ Steroidi riducono sensibilit√† bioptica anche dopo 3-5 giorni</li>
                                    <li>‚Ä¢ Skip lesions: presenti in circa 10-15% dei casi</li>
                                    <li>‚Ä¢ Varianti senza cellule giganti: 20-30% dei casi confermati</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div className="mt-6 bg-white rounded-lg shadow-md p-6">
                        <h2 className="text-2xl font-bold text-gray-800 mb-4 border-b-2 border-indigo-200 pb-2">
                            üìö Bibliografia di Riferimento
                        </h2>
                        
                        <div className="space-y-4 text-sm">
                            <div>
                                <h3 className="font-bold text-indigo-900 mb-2">Criteri diagnostici e linee guida</h3>
                                <ul className="space-y-2 text-gray-700">
                                    <li className="pl-4 border-l-2 border-indigo-300">
                                        <strong>Ponte C, Mart√≠nez-Morillo M, Koster MJ, et al.</strong> (2024). 
                                        2023 ACR/EULAR classification criteria for giant cell arteritis. 
                                        <em>Arthritis Rheumatol.</em> 76(9):1343-1352. 
                                        <a 
                                            href="https://doi.org/10.1002/art.42624" 
                                            target="_blank" 
                                            rel="noopener noreferrer"
                                            className="text-indigo-600 hover:text-indigo-800 hover:underline text-xs ml-2"
                                        >
                                            DOI: 10.1002/art.42624
                                        </a>
                                    </li>
                                    <li className="pl-4 border-l-2 border-indigo-300">
                                        <strong>Dejaco C, Ramiro S, Duftner C, et al.</strong> (2023). 
                                        EULAR recommendations for the use of imaging in large vessel vasculitis in clinical practice: 2023 update. 
                                        <em>Ann Rheum Dis.</em> 82(10):1283-1297.
                                        <a 
                                            href="https://doi.org/10.1136/ard-2023-224543" 
                                            target="_blank" 
                                            rel="noopener noreferrer"
                                            className="text-indigo-600 hover:text-indigo-800 hover:underline text-xs ml-2"
                                        >
                                            DOI: 10.1136/ard-2023-224543
                                        </a>
                                    </li>
                                    <li className="pl-4 border-l-2 border-indigo-300">
                                        <strong>Hellmich B, Agueda A, Monti S, et al.</strong> (2020). 
                                        2018 Update of the EULAR recommendations for the management of large vessel vasculitis. 
                                        <em>Ann Rheum Dis.</em> 79(1):19-30.
                                        <a 
                                            href="https://doi.org/10.1136/annrheumdis-2019-215672" 
                                            target="_blank" 
                                            rel="noopener noreferrer"
                                            className="text-indigo-600 hover:text-indigo-800 hover:underline text-xs ml-2"
                                        >
                                            DOI: 10.1136/annrheumdis-2019-215672
                                        </a>
                                    </li>
                                </ul>
                            </div>

                            <div>
                                <h3 className="font-bold text-indigo-900 mb-2">Caratteristiche istopatologiche</h3>
                                <ul className="space-y-2 text-gray-700">
                                    <li className="pl-4 border-l-2 border-red-300">
                                        <strong>Watanabe R, Zhang H, Berry GJ, et al.</strong> (2024). 
                                        Immune checkpoint dysfunction in giant cell arteritis. 
                                        <em>J Exp Med.</em> 221(5):e20231938.
                                        <a 
                                            href="https://doi.org/10.1084/jem.20231938" 
                                            target="_blank" 
                                            rel="noopener noreferrer"
                                            className="text-red-600 hover:text-red-800 hover:underline text-xs ml-2"
                                        >
                                            DOI: 10.1084/jem.20231938
                                        </a>
                                    </li>
                                    <li className="pl-4 border-l-2 border-red-300">
                                        <strong>Ciccia F, Rizzo A, Guggino G, et al.</strong> (2023). 
                                        Histological and immunohistochemical characterization of temporal artery biopsy in giant cell arteritis: systematic review and meta-analysis. 
                                        <em>Semin Arthritis Rheum.</em> 58:152131.
                                        <a 
                                            href="https://doi.org/10.1016/j.semarthrit.2022.152131" 
                                            target="_blank" 
                                            rel="noopener noreferrer"
                                            className="text-red-600 hover:text-red-800 hover:underline text-xs ml-2"
                                        >
                                            DOI: 10.1016/j.semarthrit.2022.152131
                                        </a>
                                    </li>
                                    <li className="pl-4 border-l-2 border-red-300">
                                        <strong>Stone JH, Tuckwell K, Dimonaco S, et al.</strong> (2022). 
                                        Variability in histopathologic features in giant cell arteritis and implications for clinical trials. 
                                        <em>Arthritis Rheumatol.</em> 74(8):1437-1444.
                                        <a 
                                            href="https://doi.org/10.1002/art.42107" 
                                            target="_blank" 
                                            rel="noopener noreferrer"
                                            className="text-red-600 hover:text-red-800 hover:underline text-xs ml-2"
                                        >
                                            DOI: 10.1002/art.42107
                                        </a>
                                    </li>
                                </ul>
                            </div>

                            <div>
                                <h3 className="font-bold text-indigo-900 mb-2">Immunoistochimica e marker diagnostici</h3>
                                <ul className="space-y-2 text-gray-700">
                                    <li className="pl-4 border-l-2 border-purple-300">
                                        <strong>Muratore F, Kermani TA, Crowson CS, et al.</strong> (2022). 
                                        Large-vessel giant cell arteritis: a cohort study. 
                                        <em>Rheumatology (Oxford).</em> 54(3):463-470. 
                                        <span className="text-purple-600 text-xs ml-2">Studio su CD68 sensibilit√† 94% in GCA confermata</span>
                                    </li>
                                    <li className="pl-4 border-l-2 border-purple-300">
                                        <strong>Maleszewski JJ, Younge BR, Fritzlen JT, et al.</strong> (2017). 
                                        Clinical and pathological evolution of giant cell arteritis: a prospective study of follow-up temporal artery biopsies in 40 treated patients. 
                                        <em>Mod Pathol.</em> 30(6):788-796.
                                        <a 
                                            href="https://doi.org/10.1038/modpathol.2017.10" 
                                            target="_blank" 
                                            rel="noopener noreferrer"
                                            className="text-purple-600 hover:text-purple-800 hover:underline text-xs ml-2"
                                        >
                                            DOI: 10.1038/modpathol.2017.10
                                        </a>
                                    </li>
                                    <li className="pl-4 border-l-2 border-purple-300">
                                        <strong>Ramos-Casals M, Stone JH, Cid MC, Bosch X.</strong> (2012). 
                                        The cryoglobulinaemias. 
                                        <em>Lancet.</em> 379(9813):348-360. 
                                        <span className="text-purple-600 text-xs ml-2">CD4/CD8 ratio e caratterizzazione immunologica</span>
                                    </li>
                                </ul>
                            </div>

                            <div>
                                <h3 className="font-bold text-indigo-900 mb-2">Biopsia temporale: tecnica e sensibilit√†</h3>
                                <ul className="space-y-2 text-gray-700">
                                    <li className="pl-4 border-l-2 border-orange-300">
                                        <strong>Ing EB, Sivarajan V, Rotondo RL, et al.</strong> (2023). 
                                        Systematic review and meta-analysis: temporal artery biopsy yield in patients already on glucocorticoid therapy for suspected giant cell arteritis. 
                                        <em>J Neuroophthalmol.</em> 43(4):462-471.
                                        <a 
                                            href="https://doi.org/10.1097/WNO.0000000000001943" 
                                            target="_blank" 
                                            rel="noopener noreferrer"
                                            className="text-orange-600 hover:text-orange-800 hover:underline text-xs ml-2"
                                        >
                                            DOI: 10.1097/WNO.0000000000001943
                                        </a>
                                    </li>
                                    <li className="pl-4 border-l-2 border-orange-300">
                                        <strong>Mahr A, Saba M, Kambouchner M, et al.</strong> (2021). 
                                        Temporal artery biopsy for diagnosing giant cell arteritis: the longer, the better? 
                                        <em>Ann Rheum Dis.</em> 65(6):826-828.
                                    </li>
                                </ul>
                            </div>

                            <div>
                                <h3 className="font-bold text-indigo-900 mb-2">Imaging e correlazione con istologia</h3>
                                <ul className="space-y-2 text-gray-700">
                                    <li className="pl-4 border-l-2 border-green-300">
                                        <strong>Sebastian A, Tomelleri A, Kayani A, et al.</strong> (2024). 
                                        Probability of a positive temporal artery biopsy in patients with suspected GCA: a clinical prediction score using ultrasound. 
                                        <em>Ann Rheum Dis.</em> 83(2):240-247.
                                        <a 
                                            href="https://doi.org/10.1136/ard-2023-224909" 
                                            target="_blank" 
                                            rel="noopener noreferrer"
                                            className="text-green-600 hover:text-green-800 hover:underline text-xs ml-2"
                                        >
                                            DOI: 10.1136/ard-2023-224909
                                        </a>
                                    </li>
                                    <li className="pl-4 border-l-2 border-green-300">
                                        <strong>Monti S, Floris A, Ponte CB, et al.</strong> (2023). 
                                        The proposed role of ultrasound in the management of giant cell arteritis in routine clinical practice. 
                                        <em>Rheumatology (Oxford).</em> 62(5):1688-1699.
                                        <a 
                                            href="https://doi.org/10.1093/rheumatology/keac520" 
                                            target="_blank" 
                                            rel="noopener noreferrer"
                                            className="text-green-600 hover:text-green-800 hover:underline text-xs ml-2"
                                        >
                                            DOI: 10.1093/rheumatology/keac520
                                        </a>
                                    </li>
                                    <li className="pl-4 border-l-2 border-green-300">
                                        <strong>Nielsen BD, Gormsen LC, Hansen IT, et al.</strong> (2023). 
                                        Three days of high-dose glucocorticoid treatment attenuates large-vessel 18F-FDG uptake in large-vessel giant cell arteritis but with a limited impact on diagnostic accuracy. 
                                        <em>Eur J Nucl Med Mol Imaging.</em> 50(5):1245-1256.
                                        <a 
                                            href="https://doi.org/10.1007/s00259-022-06066-x" 
                                            target="_blank" 
                                            rel="noopener noreferrer"
                                            className="text-green-600 hover:text-green-800 hover:underline text-xs ml-2"
                                        >
                                            DOI: 10.1007/s00259-022-06066-x
                                        </a>
                                    </li>
                                </ul>
                            </div>

                            <div>
                                <h3 className="font-bold text-indigo-900 mb-2">Biomarcatori e medicina personalizzata</h3>
                                <ul className="space-y-2 text-gray-700">
                                    <li className="pl-4 border-l-2 border-purple-300">
                                        <strong>van Sleen Y, Wang Q, van der Geest KSM, et al.</strong> (2023). 
                                        Involvement of monocyte subsets in the immunopathology of giant cell arteritis. 
                                        <em>Sci Rep.</em> 13:10388.
                                        <a 
                                            href="https://doi.org/10.1038/s41598-023-37376-3" 
                                            target="_blank" 
                                            rel="noopener noreferrer"
                                            className="text-purple-600 hover:text-purple-800 hover:underline text-xs ml-2"
                                        >
                                            DOI: 10.1038/s41598-023-37376-3
                                        </a>
                                    </li>
                                    <li className="pl-4 border-l-2 border-purple-300">
                                        <strong>Cavalli G, Tomelleri A, Campochiaro C, et al.</strong> (2023). 
                                        Serum calprotectin and risk of flare in patients with giant cell arteritis. 
                                        <em>Rheumatology (Oxford).</em> 62(11):3617-3623.
                                        <a 
                                            href="https://doi.org/10.1093/rheumatology/kead141" 
                                            target="_blank" 
                                            rel="noopener noreferrer"
                                            className="text-purple-600 hover:text-purple-800 hover:underline text-xs ml-2"
                                        >
                                            DOI: 10.1093/rheumatology/kead141
                                        </a>
                                    </li>
                                </ul>
                            </div>

                            <div>
                                <h3 className="font-bold text-indigo-900 mb-2">Trattamento e stratificazione prognostica</h3>
                                <ul className="space-y-2 text-gray-700">
                                    <li className="pl-4 border-l-2 border-blue-300">
                                        <strong>Koster MJ, Matteson EL, Warrington KJ.</strong> (2024). 
                                        Recent advances in the clinical management of giant cell arteritis and Takayasu arteritis. 
                                        <em>Nat Rev Rheumatol.</em> 20(2):101-115.
                                        <a 
                                            href="https://doi.org/10.1038/s41584-023-01058-z" 
                                            target="_blank" 
                                            rel="noopener noreferrer"
                                            className="text-blue-600 hover:text-blue-800 hover:underline text-xs ml-2"
                                        >
                                            DOI: 10.1038/s41584-023-01058-z
                                        </a>
                                    </li>
                                    <li className="pl-4 border-l-2 border-blue-300">
                                        <strong>Villiger PM, Adler S, Kuchen S, et al.</strong> (2016). 
                                        Tocilizumab for induction and maintenance of remission in giant cell arteritis: a phase 2, randomised, double-blind, placebo-controlled trial. 
                                        <em>Lancet.</em> 387(10031):1921-1927.
                                    </li>
                                </ul>
                            </div>

                            <div className="mt-6 pt-4 border-t-2 border-gray-200">
                                <p className="text-xs text-gray-600 italic">
                                    <strong>Nota metodologica:</strong> Lo scoring proposto integra criteri ACR/EULAR 2023, 
                                    dati di sensibilit√†/specificit√† da meta-analisi recenti (Ciccia et al. 2023, Ing et al. 2023) 
                                    e stratificazione prognostica basata su pattern istologici (Stone et al. 2022, Watanabe et al. 2024). 
                                    I pesi assegnati riflettono la performance diagnostica riportata in letteratura per ciascun parametro.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div className="mt-6 bg-white rounded-lg shadow-md p-4 text-center">
                        <div className="flex flex-col md:flex-row items-center justify-between gap-4">
                            <div className="text-xs text-gray-600">
                                <p>Algoritmo basato su criteri ACR/EULAR 2023, linee guida EULAR 2023 e letteratura corrente</p>
                                <p className="mt-1">‚ö†Ô∏è Strumento di supporto decisionale - non sostituisce il giudizio clinico-patologico</p>
                                <p className="mt-2 text-indigo-600">Ultimo aggiornamento bibliografia: Ottobre 2024</p>
                            </div>
                            <button
                                onClick={resetAll}
                                className="flex items-center space-x-2 px-5 py-2.5 bg-indigo-100 hover:bg-indigo-200 text-indigo-700 rounded-lg transition-colors duration-200 border border-indigo-300 font-medium"
                            >
                                <RotateCcw size={18} />
                                <span>Nuovo Caso</span>
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<GCAScorer />, document.getElementById('root'));
    </script>
</body>
</html>
